
name: ğŸš€ Deploy static site to GitHub Pages

on:
  push:
    branches: [main]        # run on direct pushes
  pull_request:
    branches: [main]        # still run checks on PRs

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pages: write
      id-token: write

    steps:
      - name: â¬‡ï¸  Checkout
        uses: actions/checkout@v3

      # Optional: run tests / lint first
      - name: ğŸ§ª  Install deps & run checks
        working-directory: ./project
        run: |
          npm ci
          npm test || echo "No tests"
          npm run lint || echo "No lint script"

      # ğŸ“¤ Upload the folder that actually contains index.html
      - name: ğŸ“¤  Upload Pages artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./project       

      # ğŸ› ï¸  Configure Pages site (only needed once)
      - name: ğŸ› ï¸  Configure Pages
        uses: actions/configure-pages@v3

      # ğŸš€  Publish
      - name: ğŸš€  Deploy to GitHub Pages
        uses: actions/deploy-pages@v3
