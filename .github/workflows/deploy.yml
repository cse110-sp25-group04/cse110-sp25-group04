
name: 🚀 Deploy static site to GitHub Pages

on:
  push:
    branches: [main]        # run on direct pushes
  pull_request:
    branches: [main]        # still run checks on PRs

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pages: write
      id-token: write

    steps:
      - name: ⬇️  Checkout
        uses: actions/checkout@v3

      # Optional: run tests / lint first
      - name: 🧪  Install deps & run checks
        working-directory: ./project
        run: |
          npm ci
          npm test || echo "No tests"
          npm run lint || echo "No lint script"

      # 📤 Upload the folder that actually contains index.html
      - name: 📤  Upload Pages artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./project       

      # 🛠️  Configure Pages site (only needed once)
      - name: 🛠️  Configure Pages
        uses: actions/configure-pages@v3

      # 🚀  Publish
      - name: 🚀  Deploy to GitHub Pages
        uses: actions/deploy-pages@v3
